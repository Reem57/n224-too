<!DOCTYPE html>
{% extends "layouts/base.html" %}
<html lang="en">
{% block body %}
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Member Questions</title>
    <style>
        body {
            background-image: url("blue.jpg");
            background-color: darkcyan;
        }
    </style>

</head>
<script>
    if ( window.history.replaceState ) {
      window.history.replaceState( null, null, window.location.href );
    }
    function search() {
        term = document.getElementById("term").value
        fetch('http://127.0.0.1:5000/getQuestions/?term='+term) 
            .then(response=> {
                return response.json();
            })
            .then(questions=> {
                for (var x in questions) {
                    console.log(questions[x])
                }
            })
        
     
    }
</script>
<style>
    #dbForm {
        width: 35%;
        display: flex;
        flex-direction: column;
    }
    #dbForm input[type="text"] {
        padding: 1em;
        border: none;
        outline: none;
        margin: 10px 0;
    }
    p {
        border-color: white;
        border-width: 100px;
    }
    .question {
        border:  1px solid grey;
        background-color: lightblue;
    }
</style>
<div class="search-container">
    <form action="/questions/" id='search' method="POST">
        <input type="hidden" value="search" name="formID">
        <input type="text" id="term" name="term" placeholder="Enter a search term:">
        <input type="submit">
    </form>
</div>
{% for x in questions %}
    <div class="question">
        <p>{{questions[x][0]}}</p>
        <p>{{questions[x][1]}}</p>
        <p>{{questions[x][2]}}</p>
        <p>{{questions[x][3]}}</p>
        <p><a href="{{ '/question/%s'%x|urlencode }}">Go to page</a></p>
        <form action="/addanswer/" method="POST">
            <input type="hidden" value={{x}} name="QID" id="QID">
            <input type="text" name="AUTHOR" id="AUTHOR" placeholder="What name would you like to display (optional)" autocomplete="off">
            <input type="text" name="ANSWERTEXT" id="ANSWERTEXT" placeholder="Type your answer here..." required autocomplete="off">
            <input type="submit">
        </form>
    </div>
{% endfor %}
<div id="add" class="container">
    <form action="/questions/" method="POST" id="dbForm">
        <input type="hidden" value="add" name="formID">
        <input type="text" name="subject" id="subject" placeholder="What subject is this for?" autocomplete="off" required>
        <input type="text" name="subcat" id="subcat" placeholder="What is the subcategory?" autocomplete="off">
        <input type="text" name="question" id="question" placeholder="What is your question?" autocomplete="off" required>
        <input type="text" name="note" id="note" placeholder="Any other notes/background..." autocomplete="off">
        <input type="submit" value="Add Note">
    </form>
</div>
{% endblock %}
</html>